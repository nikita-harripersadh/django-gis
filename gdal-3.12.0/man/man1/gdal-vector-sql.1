.\" Man page generated from reStructuredText.
.
.
.nr rst2man-indent-level 0
.
.de1 rstReportMargin
\\$1 \\n[an-margin]
level \\n[rst2man-indent-level]
level margin: \\n[rst2man-indent\\n[rst2man-indent-level]]
-
\\n[rst2man-indent0]
\\n[rst2man-indent1]
\\n[rst2man-indent2]
..
.de1 INDENT
.\" .rstReportMargin pre:
. RS \\$1
. nr rst2man-indent\\n[rst2man-indent-level] \\n[an-margin]
. nr rst2man-indent-level +1
.\" .rstReportMargin post:
..
.de UNINDENT
. RE
.\" indent \\n[an-margin]
.\" old: \\n[rst2man-indent\\n[rst2man-indent-level]]
.nr rst2man-indent-level -1
.\" new: \\n[rst2man-indent\\n[rst2man-indent-level]]
.in \\n[rst2man-indent\\n[rst2man-indent-level]]u
..
.TH "GDAL-VECTOR-SQL" "1" "Nov 07, 2025" "" "GDAL"
.SH NAME
gdal-vector-sql \- Apply SQL statement(s) to a dataset
.sp
Added in version 3.11.

.SH SYNOPSIS
.INDENT 0.0
.INDENT 3.5
.sp
.EX
Usage: gdal vector sql [OPTIONS] <INPUT> [<OUTPUT>]

Apply SQL statement(s) to a dataset.

Positional arguments:
  \-i, \-\-input <INPUT>                                  Input vector datasets [required]
  \-o, \-\-output <OUTPUT>                                Output vector dataset
                                                       Mutually exclusive with \-\-update

Common Options:
  \-h, \-\-help                                           Display help message and exit
  \-\-json\-usage                                         Display usage as JSON document and exit
  \-\-config <KEY>=<VALUE>                               Configuration option [may be repeated]
  \-q, \-\-quiet                                          Quiet mode (no progress bar)

Options:
  \-f, \-\-of, \-\-format, \-\-output\-format <OUTPUT\-FORMAT>  Output format (\(dqGDALG\(dq allowed)
  \-\-co, \-\-creation\-option <KEY>=<VALUE>                Creation option [may be repeated]
  \-\-lco, \-\-layer\-creation\-option <KEY>=<VALUE>         Layer creation option [may be repeated]
  \-\-overwrite                                          Whether overwriting existing output is allowed
  \-\-update                                             Whether to open existing dataset in update mode
                                                       Mutually exclusive with \-\-output
  \-\-overwrite\-layer                                    Whether overwriting existing output is allowed
  \-\-append                                             Whether appending to existing layer is allowed
                                                       Mutually exclusive with \-\-upsert
  \-\-skip\-errors                                        Skip errors when writing features
  \-\-sql <statement>|@<filename>                        SQL statement(s) [may be repeated] [required]
  \-\-output\-layer <OUTPUT\-LAYER>                        Output layer name(s) [may be repeated]
  \-\-dialect <DIALECT>                                  SQL dialect (e.g. OGRSQL, SQLITE)

Advanced Options:
  \-\-if, \-\-input\-format <INPUT\-FORMAT>                  Input formats [may be repeated]
  \-\-oo, \-\-open\-option <KEY>=<VALUE>                    Open options [may be repeated]
  \-\-output\-oo, \-\-output\-open\-option <KEY>=<VALUE>      Output open options [may be repeated]
  \-\-upsert                                             Upsert features (implies \(aqappend\(aq)
                                                       Mutually exclusive with \-\-append
.EE
.UNINDENT
.UNINDENT
.SH DESCRIPTION
.sp
\fBgdal vector sql\fP returns one or several layers evaluated from
SQL statements.
.sp
Starting with GDAL 3.12, when using \fI\%\-\-update\fP, and without an output
dataset specified, this can be used to execute statements that modify
the input dataset, such as UPDATE, DELETE, etc.
.SS Standard options
.INDENT 0.0
.TP
.B \-f, \-\-of, \-\-format, \-\-output\-format <OUTPUT\-FORMAT>
Which output vector format to use. Allowed values may be given by
\fBgdal \-\-formats | grep vector | grep rw | sort\fP
.UNINDENT
.INDENT 0.0
.TP
.B \-\-co <NAME>=<VALUE>
Many formats have one or more optional dataset creation options that can be
used to control particulars about the file created. For instance,
the GeoPackage driver supports creation options to control the version.
.sp
May be repeated.
.sp
The dataset creation options available vary by format driver, and some
simple formats have no creation options at all. A list of options
supported for a format can be listed with the
\fI\%\-\-formats\fP
command line option but the documentation for the format is the
definitive source of information on driver creation options.
See \fI\%Vector drivers\fP format
specific documentation for legal creation options for each format.
.sp
Note that dataset creation options are different from layer creation options.
.UNINDENT
.INDENT 0.0
.TP
.B \-lco <NAME>=<VALUE>
Layer creation option (format specific)
.UNINDENT
.INDENT 0.0
.TP
.B \-\-overwrite
Allow program to overwrite existing target file or dataset.
Otherwise, by default, \fBgdal\fP errors out if the target file or
dataset already exists.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-sql <sql_statement>|@<filename>
SQL statement to execute that returns a table/layer (typically a SELECT
statement).
.sp
Can be repeated to generated multiple output layers (repeating \-\-sql <value>
for each output layer)
.UNINDENT
.INDENT 0.0
.TP
.B \-\-dialect <DIALECT>
SQL dialect.
.sp
By default the native SQL of an RDBMS is used when using
\fBgdal vector sql\fP\&. If using \fBsql\fP as a step of \fBgdal vector pipeline\fP,
this is only true if the step preceding \fBsql\fP is \fBread\fP, otherwise the
\fI\%OGRSQL\fP dialect is used.
.sp
If a datasource does not support SQL natively, the default is to use the
\fBOGRSQL\fP dialect, which can also be specified with any data source.
.sp
The \fI\%SQL SQLite dialect\fP dialect can be chosen with the \fBSQLITE\fP
and \fBINDIRECT_SQLITE\fP dialect values, and this can be used with any data source.
Overriding the default dialect may be beneficial because the capabilities of
the SQL dialects vary.
.sp
Supported dialects can be checked with \fBgdal \-\-format\fP\&. For example:
.INDENT 7.0
.INDENT 3.5
.sp
.EX
$ gdal \-\-format \(dqPostgreSQL\(dq
[...]
Supported SQL dialects: NATIVE OGRSQL SQLITE
[...]

$ gdal \-\-format \(dqESRI Shapefile\(dq
[...]
Supported SQL dialects: OGRSQL SQLITE
[...]
.EE
.UNINDENT
.UNINDENT
.UNINDENT
.INDENT 0.0
.TP
.B \-\-output\-layer <OUTPUT\-LAYER>
Output SQL layer name(s). If not specified, a generic layer name such as
\(dqSELECT\(dq may be generated.
.sp
Must be specified as many times as there are SQL statements, either as
several \-\-output\-layer arguments, or a single one with the layer names
combined with comma.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-update
Added in version 3.12.

.sp
Open the (input) dataset in update mode. This option is mutually exclusive
with specifying an output dataset.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-quiet
Added in version 3.12.

.sp
Silence potential information messages.
.UNINDENT
.SS Advanced options
.INDENT 0.0
.TP
.B \-\-oo <NAME>=<VALUE>
Dataset open option (format specific).
.sp
May be repeated.
.UNINDENT
.INDENT 0.0
.TP
.B \-\-if <format>
Format/driver name to be attempted to open the input file(s). It is generally
not necessary to specify it, but it can be used to skip automatic driver
detection, when it fails to select the appropriate driver.
This option can be repeated several times to specify several candidate drivers.
Note that it does not force those drivers to open the dataset. In particular,
some drivers have requirements on file extensions.
.sp
May be repeated.
.UNINDENT
.SH GDALG OUTPUT (ON-THE-FLY / STREAMED DATASET)
.sp
This program supports serializing the command line as a JSON file using the \fBGDALG\fP output format.
The resulting file can then be opened as a vector dataset using the
\fI\%GDALG: GDAL Streamed Algorithm\fP driver, and apply the specified pipeline in a on\-the\-fly /
streamed way.
.SH EXAMPLES
.SS Example 1: Generate a GeoPackage file with a layer sorted by descending population
.INDENT 0.0
.INDENT 3.5
.sp
.EX
$ gdal vector sql in.gpkg out.gpkg \-\-output\-layer country_sorted_by_pop \-\-sql=\(dqSELECT * FROM country ORDER BY pop DESC\(dq
.EE
.UNINDENT
.UNINDENT
.SS Example 2: Generate a GeoPackage file with 2 SQL result layers
.INDENT 0.0
.INDENT 3.5
.sp
.EX
$ gdal vector sql in.gpkg out.gpkg \-\-output\-layer=beginning,end \-\-sql=\(dqSELECT * FROM my_layer LIMIT 100\(dq \-\-sql=\(dqSELECT * FROM my_layer OFFSET 100000 LIMIT 100\(dq
.EE
.UNINDENT
.UNINDENT
.SS Example 3: Modify in\-place a GeoPackage dataset
.INDENT 0.0
.INDENT 3.5
.sp
.EX
$ gdal vector sql \-\-update my.gpkg \-\-sql \(dqDELETE FROM countries WHERE pop > 1e6\(dq
.EE
.UNINDENT
.UNINDENT
.SS Example 4: Append to an existing layer of a GeoPackage file
.INDENT 0.0
.INDENT 3.5
.sp
.EX
$ gdal vector pipeline read europe.gpkg ! \e
                       sql \-\-sql \(dqSELECT * FROM country WHERE pop > 1e6\(dq ! \e
                       write \-\-append \-\-output\-layer\-name=world world.gpkg
.EE
.UNINDENT
.UNINDENT
.SH AUTHOR
Even Rouault <even.rouault@spatialys.com>
.SH COPYRIGHT
1998-2025
.\" Generated by docutils manpage writer.
.
